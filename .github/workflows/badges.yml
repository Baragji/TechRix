# Workflow Status Badges
# This workflow updates README badges with build and security status

name: "Update Status Badges"

on:
  workflow_run:
    workflows: ["CI/CD Pipeline", "CodeQL Security Analysis", "Security Scanning"]
    types:
      - completed

jobs:
  update-badges:
    name: Update Status Badges
    runs-on: ubuntu-latest
    if: github.event.workflow_run.conclusion != 'cancelled'
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      with:
        token: ${{ secrets.GITHUB_TOKEN }}

    - name: Update README with badges
      run: |
        echo "Workflow badges are automatically generated by GitHub"
        echo "Add these to your README.md:"
        echo ""
        echo "[![CI/CD Pipeline](https://github.com/${{ github.repository }}/actions/workflows/ci.yml/badge.svg)](https://github.com/${{ github.repository }}/actions/workflows/ci.yml)"
        echo "[![CodeQL](https://github.com/${{ github.repository }}/actions/workflows/codeql.yml/badge.svg)](https://github.com/${{ github.repository }}/actions/workflows/codeql.yml)"
        echo "[![Security Scanning](https://github.com/${{ github.repository }}/actions/workflows/security.yml/badge.svg)](https://github.com/${{ github.repository }}/actions/workflows/security.yml)"